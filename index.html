<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <title>GhostTrack · Quantum HyperOS Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Tema Dark Stellar Space Hub -->
  <link rel="stylesheet" href="webapp/static/gt_dark.css">

  <!-- Loader pannelli -->
  <script src="webapp/static/panel_loader.js"></script>

  <!-- Logica quantica -->
  <script src="webapp/static/quantum_advanced.js"></script>
</head>

<body>
  <header>
    <div>
      <div class="brand">GHOSTTRACK · QUANTUM HYPEROS</div>
      <div class="env mono">Public Observatory · GitHub Pages</div>
    </div>
    <div class="mono">
      <span class="tag">Quantum Layer</span>
      <span class="tag">Static Snapshot</span>
      <span class="tag">Stellar Hub</span>
    </div>
  </header>

  <main>
    <nav>
      <h2>Dashboard</h2>
      <ul>
        <li><a href="#quantum-overview" onclick="scrollToSection('quantum-overview');return false;">Quantum Overview</a></li>
        <li><a href="#quantum-metrics" onclick="scrollToSection('quantum-metrics');return false;">Metrics & Charts</a></li>
        <li><a href="#quantum-stream" onclick="scrollToSection('quantum-stream');return false;">Live Stream</a></li>
        <li><a href="#quantum-logs" onclick="scrollToSection('quantum-logs');return false;">Event Log</a></li>
      </ul>

      <div class="section-label">Atlante</div>
      <ul>
        <li><a href="docs/index.html" target="_blank">Docs · Atlas</a></li>
        <li><a href="docs/orchestrator.html" target="_blank">Orchestrator</a></li>
        <li><a href="docs/orbital_space.html" target="_blank">Orbital Layer</a></li>
        <li><a href="docs/ai_analisi.html" target="_blank">AI Analisi</a></li>
      </ul>

      <div class="section-label">Repository</div>
      <ul>
        <li><a href="https://github.com/kalihigh/GhostTrack-v2-edu" target="_blank">GitHub Repo</a></li>
      </ul>
    </nav>

    <section id="content">

      <!-- QUANTUM OVERVIEW -->
      <div id="quantum-overview" class="quantum-panel">
        <h2>Quantum Overview</h2>

        <div class="status-bar">
          <div class="status-pill pill-stable">
            <span class="status-dot"></span>
            Quantum Mesh: <span class="mono" id="status-modules">loading…</span>
          </div>

          <div class="status-pill pill-observing">
            Snapshot: <span class="mono" id="status-snapshot">loading…</span>
          </div>

          <div class="status-pill pill-critical">
            Health: <span class="mono" id="status-health">unknown</span>
          </div>
        </div>

        <pre id="quantum-identity-block">Caricamento identità quantica…</pre>
      </div>

      <!-- METRICS -->
      <div class="grid-2" id="quantum-metrics">
        <div class="quantum-panel">
          <h2>Quantum Metrics · Modules Active</h2>
          <div data-include="webapp/static/panels/quantum/quantum_charts.html"></div>
        </div>

        <div class="quantum-panel">
          <h2>Quantum Health & Resonance</h2>
          <div data-include="webapp/static/panels/quantum/quantum_health.html"></div>
          <div data-include="webapp/static/panels/quantum/quantum_resonance.html"></div>
        </div>
      </div>

      <!-- STREAM -->
      <div class="grid-2" id="quantum-stream">
        <div class="quantum-panel">
          <h2>Quantum Stream · Live Snapshot</h2>
          <div data-include="webapp/static/panels/quantum/quantum_stream.html"></div>
        </div>

        <div class="quantum-panel">
          <h2>Quantum Realities & Identity</h2>
          <div data-include="webapp/static/panels/quantum/quantum_identity.html"></div>
          <div data-include="webapp/static/panels/quantum/quantum_realities.html"></div>
        </div>
      </div>

      <!-- LOGS -->
      <div id="quantum-logs" class="quantum-panel">
        <h2>Quantum Event Log</h2>
        <div data-include="webapp/static/panels/quantum/quantum_logs.html"></div>
      </div>

      <!-- CORE / MAPPE / ZDOS13 -->
      <div class="grid-3" style="margin-top:18px;">

        <div class="quantum-panel">
          <h2>Core · Mesh & Resilienza</h2>
          <div data-include="webapp/static/panels/core/nodecore.html"></div>
          <div data-include="webapp/static/panels/reti/meshnode.html"></div>
        </div>

        <div class="quantum-panel">
          <h2>Osservazione · Atlante</h2>
          <div data-include="webapp/static/panels/osservazione/earthwatch.html"></div>
          <div data-include="webapp/static/panels/mappe/geomap_engine.html"></div>
        </div>

        <div class="quantum-panel">
          <h2>ZDOS13 · Cognitive Layer</h2>
          <div data-include="webapp/static/panels/zdos13/hyperos_continuity_engine.html"></div>
          <div data-include="webapp/static/panels/zdos13/multireality_sync_engine.html"></div>
        </div>

      </div>

    </section>
  </main>

  <footer>
    <div>GhostTrack-v2 · Quantum HyperOS · Stellar Space Hub</div>
    <div class="mono">Snapshot: webapp/static/quantum_snapshot.json</div>
  </footer>

  <script>
    async function refreshStatus() {
      try {
        const res = await fetch('webapp/static/quantum_snapshot.json?_=' + Date.now());
        if (!res.ok) return;

        const data = await res.json();

        document.getElementById('status-modules').textContent =
          'modules_active: ' + (data?.qlink?.modules_active ?? '?');

        document.getElementById('status-snapshot').textContent =
          data?.timestamp || 'static snapshot';

        document.getElementById('status-health').textContent =
          data?.health || 'n/a';

        document.getElementById('quantum-identity-block').textContent =
          JSON.stringify({
            identity: data?.identity,
            realities: data?.realities
          }, null, 2);

      } catch (e) {
        console.error('Status refresh error:', e);
      }
    }

    function scrollToSection(id) {
      const el = document.getElementById(id);
      if (el) el.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }

    window.addEventListener('load', () => {
      refreshStatus();
      setInterval(refreshStatus, 8000);
    });
  </script>

</body>
</html>
